module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},33508,a=>{"use strict";let b=(0,a.i(70106).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},43108,a=>{"use strict";let b=(0,a.i(70106).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],43108)},30252,a=>{"use strict";var b=a.i(87924),c=a.i(10815),d=a.i(72131),e=a.i(70106);let f=(0,e.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),g=(0,e.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),h=(0,e.default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var i=a.i(43108);let j=(0,e.default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var k=a.i(33508);let l=(0,e.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),m=(0,e.default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),n=(0,e.default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),o=(0,e.default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function p({isOpen:a,onClose:c,title:e,message:f,type:g="info",actions:h,showCloseButton:i=!0,closeOnOverlayClick:j=!0}){if((0,d.useEffect)(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[a]),!a)return null;let p=(a="primary")=>{switch(a){case"danger":return"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-all duration-200 hover:scale-105";case"secondary":return"px-6 py-3 border border-border hover:bg-muted text-foreground rounded-lg font-medium transition-all duration-200";default:return"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-all duration-200 hover:scale-105"}};return(0,b.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:j?c:void 0,children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,b.jsxs)("div",{className:"relative bg-card/95 backdrop-blur-xl border border-border/50 rounded-2xl shadow-2xl max-w-md w-full animate-in zoom-in-95 duration-300",onClick:a=>a.stopPropagation(),children:[i&&(0,b.jsx)("button",{onClick:c,className:"absolute top-4 right-4 p-2 hover:bg-muted rounded-lg transition-colors","aria-label":"Close dialog",children:(0,b.jsx)(k.X,{size:20})}),(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(()=>{switch(g){case"success":return(0,b.jsx)(m,{className:"w-12 h-12 text-green-500"});case"error":return(0,b.jsx)(o,{className:"w-12 h-12 text-red-500"});case"warning":return(0,b.jsx)(l,{className:"w-12 h-12 text-yellow-500"});default:return(0,b.jsx)(n,{className:"w-12 h-12 text-blue-500"})}})()}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-center mb-4",children:e}),(0,b.jsx)("p",{className:"text-foreground/80 text-center whitespace-pre-line mb-6",children:f}),(0,b.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:h&&h.length>0?h.map((a,d)=>(0,b.jsx)("button",{onClick:()=>{a.onClick(),"secondary"!==a.variant&&c()},className:p(a.variant),children:a.label},d)):(0,b.jsx)("button",{onClick:c,className:p("primary"),children:"Okay"})})]})]})]})}let q="https://every.pupujiger.workers.dev";function r(){let[a,c]=(0,d.useState)(""),[e,k]=(0,d.useState)([]),[l,m]=(0,d.useState)(!1),[n,o]=(0,d.useState)(null),[r,s]=(0,d.useState)(""),[t,u]=(0,d.useState)(!1),[v,w]=(0,d.useState)({}),[x]=(0,d.useState)(()=>""),[y,z]=(0,d.useState)(null),[A,B]=(0,d.useState)(!1),[C,D]=(0,d.useState)(!1),[E,F]=(0,d.useState)([]);(0,d.useEffect)(()=>{fetch(`${q}/api/get-course-reps`).then(a=>a.json()).then(a=>{a.success&&F(a.courseReps)}).catch(console.error)},[]),(0,d.useEffect)(()=>{if(0===a.trim().length)return void k([]);let b=setTimeout(async()=>{m(!0);try{let b=await fetch(`${q}/api/search-student`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a})}),c=await b.json();c.success&&k(c.results||[])}catch(a){G("Search failed. Please try again.")}finally{m(!1)}},300);return()=>clearTimeout(b)},[a]);let G=(a,b)=>{w({title:"Error",message:a,type:"error",actions:b||[{label:"Okay",onClick:()=>u(!1)}]}),u(!0)},H=a=>{w({title:"Success",message:a,type:"success",actions:[{label:"Okay",onClick:()=>u(!1)}]}),u(!0)},I=a=>{w({title:"Contact Course Rep",message:a,type:"warning",actions:[...E.map(a=>({label:`Contact ${a.name}`,onClick:()=>{},variant:"primary"})),{label:"Close",onClick:()=>u(!1),variant:"secondary"}]}),u(!0)},J=async()=>{if(n){if(!r.trim())return void G("Please enter a PIN");if("kissmeifyoucan"===r){D(!0),H("Welcome, protected student. You have unlimited access.");return}try{let a=await fetch(`${q}/api/verify-student`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student:n,pin:r,deviceId:x,latitude:y?.latitude,longitude:y?.longitude})}),b=await a.json();b.success?b.isProtected?(D(!0),H(b.message)):await K(!1):b.blacklisted?I(b.message):b.strikes?G(b.message):b.contactInfo?I(b.message):G(b.message||"Verification failed")}catch(a){G("Verification failed. Please try again.")}}},K=async b=>{if(n||b)try{let d=b?{name:a,index:a}:n?.studentData,e=await fetch(`${q}/api/mark-attendance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({student:d,deviceId:x,isProtected:b})}),f=await e.json();f.success?(H("âœ“ Attendance marked successfully!"),setTimeout(()=>{o(null),c(""),k([]),s(""),D(!1),u(!1)},2e3)):G(f.message||"Failed to mark attendance")}catch(a){G("Failed to mark attendance. Please try again.")}};return(0,b.jsxs)("div",{className:"max-w-4xl mx-auto mt-10 px-4",children:[(0,b.jsxs)("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-3xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 p-8 md:p-12",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-4 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Mark Your Attendance"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Search by name or index number"}),A&&(0,b.jsxs)("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg flex items-center gap-2 text-sm text-yellow-800 dark:text-yellow-200",children:[(0,b.jsx)(h,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Location access denied. Strict mode may restrict attendance."})]})]}),(0,b.jsxs)("div",{className:"relative mb-6",children:[(0,b.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:(0,b.jsx)(f,{className:"w-5 h-5"})}),(0,b.jsx)("input",{type:"text",value:a,onChange:a=>c(a.target.value),placeholder:"Type student name or index...",disabled:C,className:"w-full pl-12 pr-4 py-4 bg-gray-50 dark:bg-slate-900 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all text-lg disabled:opacity-50 disabled:cursor-not-allowed"}),l&&(0,b.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:(0,b.jsx)(g,{className:"w-5 h-5 animate-spin text-blue-500"})})]}),e.length>0&&!n&&!C&&(0,b.jsx)("div",{className:"mb-6 bg-gray-50 dark:bg-slate-900 rounded-xl border border-gray-200 dark:border-gray-700 max-h-64 overflow-y-auto",children:e.map((a,c)=>(0,b.jsxs)("button",{onClick:()=>{o(a),s("")},className:"w-full px-6 py-4 text-left hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors border-b border-gray-200 dark:border-gray-700 last:border-b-0 flex justify-between items-center",children:[(0,b.jsx)("span",{className:"font-medium",children:a.displayValue}),(0,b.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize",children:a.searchType})]},c))}),n&&!C&&(0,b.jsxs)("div",{className:"mb-6 p-6 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(i.Lock,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Verify Identity"})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"index"===n.searchType?"Enter your last name":"Enter last 5 digits of your index"}),(0,b.jsx)("input",{type:"text",value:r,onChange:a=>s(a.target.value),placeholder:"index"===n.searchType?"Last name":"Last 5 digits",className:"w-full px-4 py-3 bg-white dark:bg-slate-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none mb-4",onKeyPress:a=>"Enter"===a.key&&J()}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:J,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg font-medium shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:"Verify & Mark"}),(0,b.jsx)("button",{onClick:()=>o(null),className:"px-6 py-3 border-2 border-gray-300 dark:border-gray-600 hover:border-red-500 dark:hover:border-red-500 text-gray-700 dark:text-gray-300 hover:text-red-500 rounded-lg font-medium transition-all duration-200",children:"Cancel"})]})]}),C&&(0,b.jsxs)("div",{className:"p-6 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl border-2 border-purple-300 dark:border-purple-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(j,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"}),(0,b.jsx)("h3",{className:"font-bold text-lg text-purple-900 dark:text-purple-100",children:"Protected Mode Active"})]}),(0,b.jsx)("p",{className:"text-sm text-purple-700 dark:text-purple-300 mb-4",children:"You can mark attendance for any student. Enter name or index above and click Mark."}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>{a.trim()?K(!0):G("Please enter student name or index")},className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-lg font-medium shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:"Mark Attendance"}),(0,b.jsx)("button",{onClick:()=>{D(!1),c(""),s("")},className:"px-6 py-3 border-2 border-gray-300 dark:border-gray-600 hover:border-gray-400 rounded-lg font-medium transition-all duration-200",children:"Exit Protected Mode"})]})]})]}),t&&(0,b.jsx)(p,{isOpen:t,onClose:()=>u(!1),...v})]})}function s(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.Navbar,{}),(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 dark:from-slate-950 dark:via-blue-950 dark:to-slate-900 pt-20 pb-20 px-4",children:(0,b.jsx)(r,{})})]})}a.s(["default",()=>s],30252)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__1bca4820._.js.map